name: Build repo
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      
      - name: Installing git
        run: sudo apt-get install -y git

      - name: Making input directory
        run: mkdir /tmp/stuff
        
      - name: Copying files
        run: cp -r . /tmp/stuff

      - name: Deleting files
        run: rm -rf *
        run: rm -rf /tmp/stuff/.git*

      - name: Downloading blogging software...
        run: git clone https://github.com/greysoh/blog-gen

      - name: Installing blogging software...
        run: cd blog-gen
        run: npm install
        run: cp -r /tmp/stuff

      - name: Running blogging software...
        run: cd blog-gen 
        run: npm start

      - name: Listing files (for debugging)
        run: cd blog-gen
        run: ls out
